# å°ˆæ¡ˆæª”æ¡ˆçµæ§‹èªªæ˜

## ğŸ“ æ•´ç†å¾Œçš„æª”æ¡ˆçµæ§‹

## ğŸ› ï¸ é–‹ç™¼å·¥å…·ä½¿ç”¨

### ç‰ˆæœ¬ç®¡ç†
```bash
python scripts/version_manager.py
```

### ç’°å¢ƒæª¢æŸ¥
```bash
bash scripts/check_environments.sh
```

### ç¨‹å¼ç¢¼å“è³ªæª¢æŸ¥
```bash
python scripts/quality_checker.py
```

### å‚™ä»½ç®¡ç†
```bash
python scripts/backup_manager.py
```

```
Project Japan/
â”œâ”€â”€ ğŸ“„ main.py                    # ä¸»è¦æ‡‰ç”¨ç¨‹å¼ (å«ç‰ˆæœ¬ API)
â”œâ”€â”€ ğŸ“„ version.py                 # ç‰ˆæœ¬è™Ÿç®¡ç†æª”æ¡ˆ
â”œâ”€â”€ ğŸ“„ .gitignore                 # Git å¿½ç•¥æª”æ¡ˆ
â”œâ”€â”€ ğŸ“„ env.example               # ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹
â”œâ”€â”€ 
â”œâ”€â”€ ğŸ“ config/                   # é…ç½®ç›¸é—œ
â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”œâ”€â”€ ğŸ“„ config.py             # ç’°å¢ƒé…ç½®ç®¡ç†
â”‚   â””â”€â”€ ğŸ“„ setup_prd_ga.py       # PRD GA è¨­å®šå·¥å…·
â”œâ”€â”€ 
â”œâ”€â”€ ğŸ“ deployment/               # éƒ¨ç½²ç›¸é—œ
â”‚   â”œâ”€â”€ ğŸ“„ Dockerfile           # Docker å»ºç½®æª”æ¡ˆ (æ”¯æ´ç‰ˆæœ¬è™Ÿ)
â”‚   â”œâ”€â”€ ğŸ“„ cloudbuild-staging.yaml    # STG ç‰ˆæœ¬åŒ–éƒ¨ç½²é…ç½®
â”‚   â”œâ”€â”€ ğŸ“„ cloudbuild-production.yaml # PRD ç‰ˆæœ¬åŒ–éƒ¨ç½²é…ç½®
â”‚   â”œâ”€â”€ ğŸ“„ requirements.txt      # Python ä¾è³´
â”‚   â”œâ”€â”€ ğŸ“„ requirements-dev.txt  # é–‹ç™¼ä¾è³´
â”‚   â””â”€â”€ ğŸ“„ test-requirements.txt # æ¸¬è©¦ä¾è³´
â”œâ”€â”€ 
â”œâ”€â”€ ğŸ“ docs/                     # æ–‡æª”è³‡æ–™
â”‚   â”œâ”€â”€ ğŸ“„ CHANGELOG.md          # è®Šæ›´æ—¥èªŒ
â”‚   â”œâ”€â”€ ğŸ“„ DEPLOYMENT.md         # éƒ¨ç½²èªªæ˜
â”‚   â”œâ”€â”€ ğŸ“„ GA_TEST_REPORT.md     # GA æ¸¬è©¦å ±å‘Š
â”‚   â”œâ”€â”€ ğŸ“„ STG_TEST_REPORT.md    # STG æ¸¬è©¦å ±å‘Š
â”‚   â”œâ”€â”€ ğŸ“„ TEST_SUITE_OVERVIEW.md # æ¸¬è©¦å¥—ä»¶æ¦‚è¦½
â”‚   â”œâ”€â”€ ğŸ“„ GIT_FLOW_GUIDE.md     # Git Flow æŒ‡å¼•
â”‚   â”œâ”€â”€ ğŸ“„ VERSION_CONTROL_GUIDE.md # ç‰ˆæœ¬è™Ÿæ§åˆ¶æŒ‡å¼•
â”‚   â””â”€â”€ ğŸ“„ PROJECT_STRUCTURE.md  # å°ˆæ¡ˆçµæ§‹èªªæ˜ (æœ¬æª”æ¡ˆ)
â”œâ”€â”€ 
â”œâ”€â”€ ğŸ“ scripts/                  # è…³æœ¬å·¥å…·
â”‚   â”œâ”€â”€ ğŸ“„ sync_dev_environment.sh  # é–‹ç™¼ç’°å¢ƒåŒæ­¥è…³æœ¬
â”‚   â”œâ”€â”€ ğŸ“„ version_manager.py       # ç‰ˆæœ¬ç®¡ç†å·¥å…·
â”‚   â”œâ”€â”€ ğŸ“„ backup_manager.py        # å‚™ä»½ç®¡ç†å·¥å…·
â”‚   â”œâ”€â”€ ğŸ“„ check_environments.sh    # ç’°å¢ƒæª¢æŸ¥è…³æœ¬
â”‚   â””â”€â”€ ğŸ“„ quality_checker.py       # ç¨‹å¼ç¢¼å“è³ªæª¢æŸ¥å·¥å…·
â”œâ”€â”€ 
â”œâ”€â”€ ğŸ“ templates/                # ç¶²é æ¨¡æ¿
â”‚   â””â”€â”€ ğŸ“„ index.html           # ä¸»é é¢æ¨¡æ¿
â”œâ”€â”€ 
â”œâ”€â”€ ğŸ“ tests/                    # æ¸¬è©¦å¥—ä»¶
â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”œâ”€â”€ ğŸ“ stg/                 # STG ç’°å¢ƒæ¸¬è©¦
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ test_stg_api.py    # STG API æ¸¬è©¦
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ test_stg_browser.py # STG ç€è¦½å™¨æ¸¬è©¦
â”‚   â”‚   â””â”€â”€ ğŸ“„ test_stg_ga.py     # STG GA æ¸¬è©¦
â”‚   â”œâ”€â”€ ğŸ“ prd/                 # PRD ç’°å¢ƒæ¸¬è©¦
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ test_prd_api.py    # PRD API æ¸¬è©¦
â”‚   â”‚   â””â”€â”€ ğŸ“„ test_prd_ga.py     # PRD GA æ¸¬è©¦
â”‚   â””â”€â”€ ğŸ“ shared/              # å…±ç”¨æ¸¬è©¦å·¥å…·
â”‚       â”œâ”€â”€ ğŸ“„ __init__.py
â”‚       â”œâ”€â”€ ğŸ“„ test_ga_tracking.py      # GA è¿½è¹¤æ¸¬è©¦
â”‚       â””â”€â”€ ğŸ“„ verify_prd_deployment.py # éƒ¨ç½²é©—è­‰
â””â”€â”€ 
â””â”€â”€ ğŸ“ .git/                    # Git ç‰ˆæœ¬æ§åˆ¶ (éš±è—)
â””â”€â”€ ğŸ“ .venv/                   # è™›æ“¬ç’°å¢ƒ (éš±è—)
```

## ğŸ¯ æª”æ¡ˆåˆ†é¡èªªæ˜

### ğŸ“„ æ ¹ç›®éŒ„æ ¸å¿ƒæª”æ¡ˆ
* **main.py**: ä¸»è¦ Flask æ‡‰ç”¨ç¨‹å¼ï¼Œå«ç‰ˆæœ¬ API ç«¯é» (`/version`)
* **version.py**: ç‰ˆæœ¬è™Ÿå®šç¾©å’Œç®¡ç†ï¼Œéµå¾ª Semantic Versioning

### ğŸ“ config/ - é…ç½®ç®¡ç†
* **config.py**: çµ±ä¸€çš„ç’°å¢ƒé…ç½®ç®¡ç†
* **setup_prd_ga.py**: PRD ç’°å¢ƒ GA è¨­å®šäº’å‹•å·¥å…·

### ğŸ“ deployment/ - éƒ¨ç½²é…ç½®
* **Dockerfile**: Docker æ˜ åƒå»ºç½®ï¼Œæ”¯æ´ç‰ˆæœ¬è™Ÿå’Œå»ºç½®ç·¨è™Ÿ
* **cloudbuild-*.yaml**: Google Cloud Build é…ç½®ï¼Œæ•´åˆç‰ˆæœ¬è™Ÿç®¡ç†
* **requirements*.txt**: Python ä¾è³´ç®¡ç†

### ğŸ“ docs/ - æ–‡æª”è³‡æ–™
* **æŠ€è¡“æ–‡æª”**: æ¸¬è©¦å ±å‘Šã€éƒ¨ç½²èªªæ˜
* **é–‹ç™¼æŒ‡å¼•**: Git Flowã€ç‰ˆæœ¬æ§åˆ¶æŒ‡å¼•
* **å°ˆæ¡ˆæ–‡æª”**: è®Šæ›´æ—¥èªŒã€çµæ§‹èªªæ˜

### ğŸ“ scripts/ - é–‹ç™¼å·¥å…·
* **sync_dev_environment.sh**: é–‹ç™¼ç’°å¢ƒåŒæ­¥è…³æœ¬
* **version_manager.py**: ç‰ˆæœ¬è™Ÿç®¡ç†å’Œç™¼ä½ˆå·¥å…·
* **backup_manager.py**: å‚™ä»½ç®¡ç†å·¥å…·
* **check_environments.sh**: ç’°å¢ƒæª¢æŸ¥è…³æœ¬
* **quality_checker.py**: ç¨‹å¼ç¢¼å“è³ªæª¢æŸ¥å·¥å…·

### ğŸ“ tests/ - æ¸¬è©¦å¥—ä»¶
* **stg/**: STG ç’°å¢ƒå°ˆç”¨æ¸¬è©¦
* **prd/**: PRD ç’°å¢ƒå°ˆç”¨æ¸¬è©¦  
* **shared/**: è·¨ç’°å¢ƒå…±ç”¨æ¸¬è©¦å·¥å…·

### ğŸ“ templates/ - å‰ç«¯æ¨¡æ¿
* **index.html**: ä¸»æ‡‰ç”¨ç¨‹å¼ HTML æ¨¡æ¿

## ğŸ”§ ä½¿ç”¨æ–¹å¼

### é‹è¡Œæ¸¬è©¦
```bash
# STG ç’°å¢ƒæ¸¬è©¦
python tests/stg/test_stg_api.py
python tests/stg/test_stg_ga.py

# PRD ç’°å¢ƒæ¸¬è©¦
python tests/prd/test_prd_api.py
python tests/prd/test_prd_ga.py

# å…±ç”¨å·¥å…·
python tests/shared/verify_prd_deployment.py
```



### ç‰ˆæœ¬è™Ÿç®¡ç†
```bash
# æŸ¥çœ‹ç‰ˆæœ¬ç‹€æ…‹
python scripts/version_manager.py status

# ç™¼ä½ˆæ–°ç‰ˆæœ¬
python scripts/version_manager.py release patch "ä¿®å¾©æè¿°"
python scripts/version_manager.py release minor "æ–°åŠŸèƒ½æè¿°"
python scripts/version_manager.py release major "é‡å¤§æ›´æ–°æè¿°"

# æŸ¥çœ‹ç‰ˆæœ¬è³‡è¨Š
python version.py
```

### é…ç½®ç®¡ç†
```bash
# è¨­å®š PRD GA è¿½è¹¤
python config/setup_prd_ga.py

# æŸ¥çœ‹é…ç½®è¨­å®š
python -c "from config.config import *; print('STG:', STG_CONFIG); print('PRD:', PRD_CONFIG)"
```

## ğŸ“‹ æª”æ¡ˆæ•´ç†å„ªé»

1. **æ¸…æ™°åˆ†é¡**: æŒ‰åŠŸèƒ½åˆ†é¡æª”æ¡ˆï¼Œæ˜“æ–¼ç¶­è­·
2. **ç’°å¢ƒéš”é›¢**: STG/PRD æ¸¬è©¦å®Œå…¨åˆ†é›¢
3. **æ¨¡çµ„åŒ–**: ä½¿ç”¨ Python æ¨¡çµ„çµæ§‹
4. **æ¨™æº–åŒ–**: éµå¾ª Python å°ˆæ¡ˆæœ€ä½³å¯¦è¸
5. **ç‰ˆæœ¬æ§åˆ¶**: å®Œæ•´çš„ç‰ˆæœ¬è™Ÿç®¡ç†ç³»çµ±
6. **è‡ªå‹•åŒ–**: Git Flow å’Œç‰ˆæœ¬ç™¼ä½ˆè‡ªå‹•åŒ–
7. **æ˜“æ–¼æ“´å±•**: æ–°å¢åŠŸèƒ½æ™‚çµæ§‹æ¸…æ™°

## ğŸ›¡ï¸ Git Flow æ•´åˆ

æ•´ç†å¾Œçš„çµæ§‹å®Œå…¨æ”¯æ´æ¨™æº– Git Flowï¼š
* **æ¨™æº–åŒ–åˆ†æ”¯ç®¡ç†** ç¢ºä¿ä»£ç¢¼å“è³ª
* **CI/CD** è‡ªå‹•éƒ¨ç½²æµç¨‹

## ğŸ”¢ ç‰ˆæœ¬è™Ÿæ§åˆ¶æ•´åˆ

æ–°å¢çš„ç‰ˆæœ¬è™Ÿæ§åˆ¶ç³»çµ±ï¼š
* **scripts/version_manager.py** è‡ªå‹•åŒ–ç‰ˆæœ¬ç®¡ç†
* **version.py** æ¨™æº–åŒ–ç‰ˆæœ¬å®šç¾©
* **CI/CD ç‰ˆæœ¬åŒ–** æ¯æ¬¡éƒ¨ç½²éƒ½æœ‰æ˜ç¢ºç‰ˆæœ¬è™Ÿ
* **ç‰ˆæœ¬ API** å¯æŸ¥è©¢æ‡‰ç”¨ç¨‹å¼ç‰ˆæœ¬è³‡è¨Š

## ğŸ“ ç¶­è­·æ³¨æ„äº‹é …

1. **æ–°å¢æ¸¬è©¦**: æŒ‰ç’°å¢ƒåˆ†é¡æ”¾ç½®å°æ‡‰è³‡æ–™å¤¾
2. **æ›´æ–°æ–‡æª”**: åœ¨ docs/ ç›®éŒ„ç¶­è­·ç›¸é—œæ–‡æª”
3. **é…ç½®è®Šæ›´**: çµ±ä¸€åœ¨ config/ ç›®éŒ„ç®¡ç†
4. **éƒ¨ç½²è¨­å®š**: åœ¨ deployment/ ç›®éŒ„æ›´æ–°ç›¸é—œæª”æ¡ˆ
5. **ç‰ˆæœ¬ç™¼ä½ˆ**: ä½¿ç”¨ version_manager.py å·¥å…·æ¨™æº–åŒ–ç™¼ä½ˆæµç¨‹
6. **Git Flow**: éµå¾ªæ¨™æº– Git Flow é–‹ç™¼æµç¨‹

## ğŸš€ é–‹ç™¼æµç¨‹æ•´åˆ

å®Œæ•´çš„ä¼æ¥­ç´šé–‹ç™¼æµç¨‹ï¼š

```
1. éœ€æ±‚åˆ†æ
   â†“
2. å‰µå»º Feature Branch
   â†“
3. é–‹ç™¼å¯¦ä½œ
   â†“
4. æ¸¬è©¦é©—è­‰ (tests/)
   â†“
5. æäº¤åˆ° Feature Branch
   â†“
6. å‰µå»º Pull Request
   â†“
7. ä»£ç¢¼å¯©æŸ¥
   â†“
8. åˆä½µåˆ° Main
   â†“
9. ç™¼ä½ˆç‰ˆæœ¬ (version_manager.py)
   â†“
10. è‡ªå‹•åŒ–éƒ¨ç½² (CI/CD + ç‰ˆæœ¬è™Ÿ)
    â†“
11. ç”Ÿç”¢ç’°å¢ƒé©—è­‰
```

é€™å€‹çµæ§‹è®“å°ˆæ¡ˆæ›´å°ˆæ¥­åŒ–ï¼Œä¾¿æ–¼åœ˜éšŠå”ä½œå’Œç¶­è­·ï¼ŒåŒæ™‚å…·å‚™ä¼æ¥­ç´šçš„ç‰ˆæœ¬æ§åˆ¶å’Œéƒ¨ç½²èƒ½åŠ›ã€‚ 