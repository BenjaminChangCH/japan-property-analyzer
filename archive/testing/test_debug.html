<!DOCTYPE html>
<html>
<head>
    <title>Debug Test</title>
</head>
<body>
    <h1>Debug Test Page</h1>
    <button id="testBtn">Test Calculate API</button>
    <div id="result"></div>
    <div id="error" style="color: red;"></div>
    
    <script>
        document.getElementById('testBtn').addEventListener('click', async function() {
            console.log('Test button clicked');
            const resultDiv = document.getElementById('result');
            const errorDiv = document.getElementById('error');
            
            try {
                const testData = {
                    monetizationModel: 'airbnb',
                    purchaseType: 'individual',
                    propertyPrice: 3000,
                    exchangeRate: 0.22,
                    downPaymentRatio: 20,
                    acquisitionCostRatio: 7,
                    loanOrigin: 'japan',
                    initialFurnishingCost: 100,
                    japanLoanInterestRate: 2.5,
                    japanLoanTerm: 30,
                    managementFeeRatio: 12,
                    propertyTaxRate: 0.4,
                    annualAppreciation: 2,
                    investmentPeriod: 10,
                    buildingStructure: 'rc',
                    buildingRatio: 60,
                    corporateTaxRate: 23.2,
                    annualInsuranceCost: 5,
                    operatingDaysCap: 365,
                    occupancyRate: 70,
                    dailyRate: 12000,
                    platformFeeRate: 3,
                    cleaningFee: 5000,
                    avgStayDuration: 3,
                    avgGuests: 2,
                    baseOccupancyForFee: 2,
                    extraGuestFee: 1000,
                    peakSeasonMarkup: 20,
                    monthlyUtilities: 15000
                };
                
                console.log('Sending data:', testData);
                
                const response = await fetch('/calculate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(testData)
                });
                
                console.log('Response status:', response.status);
                
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error || `HTTP error! status: ${response.status}`);
                }
                
                const result = await response.json();
                console.log('Success result:', result);
                resultDiv.innerHTML = '<pre>' + JSON.stringify(result, null, 2) + '</pre>';
                errorDiv.innerHTML = '';
                
            } catch (error) {
                console.error('Error:', error);
                errorDiv.innerHTML = 'Error: ' + error.message;
                resultDiv.innerHTML = '';
            }
        });
    </script>
</body>
</html> 